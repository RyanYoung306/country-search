{"ast":null,"code":"var path = require('path'),\n  fs = require('fs'),\n  jm = require(\"./json-minify\"),\n  objectPath = require('object-path'),\n  extend = require('extend'),\n  _ = require('lodash');\nfunction Config() {\n  this.data = {};\n}\nConfig.prototype._processTemplate = function (tpl) {\n  var self = this;\n  if (_.isString(tpl)) {\n    return tpl.replace(/^={([\\w\\.\\|]+)}$/, replacer(true)).replace(/\\${([\\w\\.\\|]+)}/g, replacer(false));\n    function replacer(nothrow) {\n      return function (match, varname) {\n        var vars = varname.split(\"|\");\n        for (var i = 0; i < vars.length; i++) {\n          var val = self.get(vars[i]);\n          if (val) {\n            return val;\n          }\n        }\n        if (nothrow) {\n          return \"\";\n        }\n        throw new Error(\"Cannot replace config variable '\" + varname + \"' in '\" + tpl + \"' because it is undefined\");\n      };\n    }\n  } else if (_.isArray(tpl)) {\n    var arr = [];\n    _.each(tpl, function (val) {\n      arr.push(self._processTemplate(val));\n    });\n    return arr;\n  } else if (_.isObject(tpl)) {\n    var obj = {};\n    _.each(tpl, function (val, key) {\n      obj[key] = self._processTemplate(val);\n    });\n    return obj;\n  }\n  return tpl;\n};\nConfig.prototype.get = function (key) {\n  return this._processTemplate(this.getRaw(key));\n};\nConfig.prototype.getRaw = function (key) {\n  return objectPath.get(this.data, key);\n};\nConfig.prototype.set = function (key, val) {\n  return objectPath.set(this.data, key, val);\n};\nConfig.prototype.persistDefault = function (key, val, callback) {\n  if (!this.get(key)) {\n    this.set(key, val);\n  }\n  this._persist(key, val, 'defaults.gen.json', callback);\n};\nConfig.prototype.persistOverride = function (key, val, callback) {\n  this.set(key, val);\n  this._persist(key, val, 'overrides.gen.json', callback);\n};\nConfig.prototype._persist = function (key, val, file, callback) {\n  file = path.join(this.get('genConfigDir'), file);\n  //persist into overrides\n  //TODO save/flush on app close?\n\n  //force creation\n  fs.closeSync(fs.openSync(file, 'a'));\n  fs.readFile(file, 'utf-8', function (err, data) {\n    if (err) {\n      return callback(err);\n    }\n    var obj = {};\n    if (data) {\n      obj = JSON.parse(data);\n    }\n    objectPath.set(obj, key, val);\n    fs.writeFile(file, JSON.stringify(obj, null, \"  \"), callback);\n  });\n};\nConfig.prototype.mergeChain = function (chain) {\n  var args = [true, {}].concat(chain);\n  args.push(this.data);\n  this.data = extend.apply(null, args);\n};\nConfig.prototype.initialize = function (init) {\n  if (this.initialized) {\n    return;\n  }\n  this.initialized = true;\n  init = init || {};\n  var chain = [];\n  chain.push(_.omit(require('minimist')(process.argv.slice(2)), '_'));\n  chain.push(process.env);\n  chain.push(init);\n\n  //save chain now to get some initial variables\n  this.mergeChain(chain);\n  chain = [];\n  var isDev = this.get('NODE_ENV') ? this.get('NODE_ENV') === 'development' : true;\n  var isProd = this.get('NODE_ENV') ? this.get('NODE_ENV') === 'production' : false;\n  var env = isDev ? \"dev\" : 'prod';\n  chain.push({\n    isDev: isDev,\n    isProd: isProd,\n    env: env\n  });\n\n  //save chain now to get some initial variables\n  this.mergeChain(chain);\n  chain = [];\n\n  //sanitize some important config variables\n  var cwd = path.resolve(this.get('cwd') || process.cwd());\n  process.chdir(cwd);\n  var appRoot = this.get('appRoot') || cwd;\n  var configDir = this.getRaw('configDir') || \"${appRoot}/config\";\n  var genConfigDir = this.getRaw('genConfigDir') || configDir;\n  chain.push({\n    appRoot: appRoot,\n    configDir: configDir,\n    genConfigDir: genConfigDir,\n    cwd: cwd\n  });\n  this.mergeChain(chain);\n  chain = [];\n  configDir = this.get('configDir');\n  genConfigDir = this.get('genConfigDir');\n  var genDefaults = path.join(genConfigDir, 'defaults.gen.json');\n  if (fs.existsSync(genDefaults)) {\n    chain.push(this.getFileData(genDefaults));\n  }\n  var next = path.join(configDir, 'defaults.json');\n  while (next && fs.existsSync(next)) {\n    var nextConfig = this.getFileData(next);\n    chain.push(nextConfig);\n\n    //get next\n    var nextName = nextConfig.next;\n    if (nextName) {\n      if (typeof nextName !== 'string') {\n        nextName = nextName[env];\n      }\n      next = path.join(configDir, nextName);\n    } else {\n      next = null;\n    }\n  }\n  var overrides = path.join(genConfigDir, 'overrides.gen.json');\n  if (fs.existsSync(overrides)) {\n    chain.push(this.getFileData(overrides));\n  }\n  this.mergeChain(chain);\n};\nConfig.prototype.getFileData = function (filename) {\n  try {\n    return JSON.parse(jm.minify(fs.readFileSync(filename, 'utf-8')));\n  } catch (err) {\n    throw new Error(\"Failed to parse config file \" + filename + \". Caused by: \\n\" + err.stack);\n  }\n};\nConfig.prototype.clear = function () {\n  this.data = {};\n  this.initialized = false;\n};\nmodule.exports = Config;","map":{"version":3,"names":["path","require","fs","jm","objectPath","extend","_","Config","data","prototype","_processTemplate","tpl","self","isString","replace","replacer","nothrow","match","varname","vars","split","i","length","val","get","Error","isArray","arr","each","push","isObject","obj","key","getRaw","set","persistDefault","callback","_persist","persistOverride","file","join","closeSync","openSync","readFile","err","JSON","parse","writeFile","stringify","mergeChain","chain","args","concat","apply","initialize","init","initialized","omit","process","argv","slice","env","isDev","isProd","cwd","resolve","chdir","appRoot","configDir","genConfigDir","genDefaults","existsSync","getFileData","next","nextConfig","nextName","overrides","filename","minify","readFileSync","stack","clear","module","exports"],"sources":["C:/Users/twotr/Desktop/College/vsCode/WorkHumanApplication/country-search/node_modules/particles/lib/config.js"],"sourcesContent":["var path = require('path'),\n  fs = require('fs'),\n  jm = require(\"./json-minify\"),\n  objectPath = require('object-path'),\n  extend = require('extend'),\n  _ = require('lodash');\n\n\nfunction Config() {\n  this.data = {};\n}\n\n\nConfig.prototype._processTemplate = function(tpl) {\n  var self = this;\n  if(_.isString(tpl)) {\n    return tpl.replace(/^={([\\w\\.\\|]+)}$/, replacer(true)).replace(/\\${([\\w\\.\\|]+)}/g, replacer(false));\n\n    function replacer(nothrow) {\n      return function(match, varname) {\n        var vars = varname.split(\"|\");\n        for(var i = 0; i < vars.length; i++) {\n          var val = self.get(vars[i]);\n          if(val) {\n            return val;\n          }\n        }\n        \n        if(nothrow) {\n          return \"\";\n        }\n        \n        throw new Error(\"Cannot replace config variable '\" + varname +\"' in '\"+ tpl +\"' because it is undefined\");\n      }\n    }\n  } else if(_.isArray(tpl)) {\n    var arr = [];\n    _.each(tpl, function(val) {\n      arr.push(self._processTemplate(val));\n    });\n    return arr;\n  } else if(_.isObject(tpl)){\n    var obj = {};\n    _.each(tpl, function(val, key) {\n      obj[key] = self._processTemplate(val);\n    });\n    return obj;\n  }\n  return tpl;\n};\n\n\nConfig.prototype.get = function(key) {\n  return this._processTemplate(this.getRaw(key));\n};\n\nConfig.prototype.getRaw = function(key) {\n  return objectPath.get(this.data, key);\n};\n\nConfig.prototype.set = function(key, val) {\n  return objectPath.set(this.data, key, val);\n};\n\nConfig.prototype.persistDefault = function(key, val, callback) {\n  if(!this.get(key)) {\n    this.set(key, val);\n  }\n  this._persist(key, val, 'defaults.gen.json', callback);\n};\n\nConfig.prototype.persistOverride = function(key, val, callback) {\n  this.set(key, val);\n  this._persist(key, val, 'overrides.gen.json', callback);\n};\n\nConfig.prototype._persist = function(key, val, file, callback) {\n\n  file = path.join(this.get('genConfigDir'), file);\n  //persist into overrides\n  //TODO save/flush on app close?\n\n  //force creation\n  fs.closeSync(fs.openSync(file, 'a'));\n\n  fs.readFile(file, 'utf-8', function(err, data) {\n    if(err) {\n      return callback(err);\n    }\n\n    var obj = {};\n    if(data) {\n      obj = JSON.parse(data);\n    }\n\n    objectPath.set(obj, key, val);\n    fs.writeFile(file, JSON.stringify(obj, null, \"  \"), callback);\n  });\n};\n\nConfig.prototype.mergeChain = function(chain) {\n  var args = [true, {}].concat(chain);\n  args.push(this.data);\n\n  this.data = extend.apply(null, args);\n};\n\n\nConfig.prototype.initialize = function(init) {\n  if(this.initialized) {\n    return;\n  }\n  this.initialized = true;\n  init = init || {};\n\n  var chain = [];\n\n  chain.push(_.omit(require('minimist')(process.argv.slice(2)), '_'));\n  chain.push(process.env);\n  chain.push(init);\n\n  //save chain now to get some initial variables\n  this.mergeChain(chain);\n  chain = [];\n  \n  var isDev = this.get('NODE_ENV') ? this.get('NODE_ENV') === 'development' : true;\n  var isProd = this.get('NODE_ENV') ? this.get('NODE_ENV') === 'production' : false;\n  var env = isDev ? \"dev\" : 'prod';\n\n  chain.push({\n    isDev: isDev,\n    isProd: isProd,\n    env: env\n  });\n\n  //save chain now to get some initial variables\n  this.mergeChain(chain);\n  chain = [];\n  \n  //sanitize some important config variables\n  var cwd = path.resolve(this.get('cwd') || process.cwd());\n  process.chdir(cwd);\n\n  var appRoot = this.get('appRoot') || cwd;\n  var configDir = this.getRaw('configDir') || \"${appRoot}/config\";\n  var genConfigDir = this.getRaw('genConfigDir') || configDir;\n  \n  chain.push({\n    appRoot: appRoot,\n    configDir: configDir,\n    genConfigDir: genConfigDir,\n    cwd: cwd\n  });\n  this.mergeChain(chain);\n  chain = [];\n\n  configDir = this.get('configDir');\n  genConfigDir = this.get('genConfigDir');\n  \n  var genDefaults = path.join(genConfigDir, 'defaults.gen.json');\n  if(fs.existsSync(genDefaults)) {\n    chain.push(this.getFileData(genDefaults));\n  }\n\n  var next = path.join(configDir, 'defaults.json');\n  while(next && fs.existsSync(next)) {\n    var nextConfig = this.getFileData(next);\n    chain.push(nextConfig);\n\n    //get next\n    var nextName = nextConfig.next;\n    if(nextName) {\n      if(typeof nextName !== 'string') {\n        nextName = nextName[env];\n      }\n\n      next = path.join(configDir, nextName);\n    } else {\n      next = null;\n    }\n  }\n\n  var overrides = path.join(genConfigDir, 'overrides.gen.json');\n  if(fs.existsSync(overrides)) {\n    chain.push(this.getFileData(overrides));\n  }\n\n  this.mergeChain(chain);\n};\n  \nConfig.prototype.getFileData = function(filename) {\n  try {\n    return JSON.parse(jm.minify(fs.readFileSync(filename, 'utf-8')));\n  } catch(err) {\n    throw new Error(\"Failed to parse config file \" + filename + \". Caused by: \\n\" + err.stack);\n  }\n};\n\nConfig.prototype.clear = function() {\n  this.data = {};\n  this.initialized = false;\n};\n\n\nmodule.exports = Config;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}