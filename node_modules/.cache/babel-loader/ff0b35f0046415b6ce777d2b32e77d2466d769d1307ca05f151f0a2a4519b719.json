{"ast":null,"code":"var _ = require('lodash'),\n  Promises = require('./promises'),\n  Constants = require('./constants'),\n  path = require('path'),\n  utils = require('./utils');\n\n/**\n *\n * @param name\n * @param container\n * @param data\n * @param options\n * @constructor\n */\nfunction Module(name, container, data, options) {\n  this.name = name;\n  this.container = container;\n  this.options = options;\n  this.log = this.options.log;\n  this.startProfiling = this.options.startProfiling;\n  this.initStatus = Constants.MODULE_NOT_INSTANTIATED;\n  //this.delayedDeps = {};\n\n  this.setData(data);\n}\nModule.prototype.resolveDependencyName = function (dep) {\n  if (this.isPlainModuleDep(dep)) {\n    if (dep[0] !== \".\" && dep[0] !== \"/\") {\n      //always consider a module as absolute unless specifically stated\n      //otherwise\n      dep = path.join(\"/\", dep);\n    }\n    //Remove leading \"/\" or leading drive letter e.g \"C:\\\"\n    var sliceSize = process.platform === \"win32\" ? 3 : 1;\n    return path.resolve(\"/\", path.dirname(this.name), dep).slice(sliceSize).replace(/\\\\/g, '/');\n  }\n  return dep;\n};\nModule.prototype._normalizeAnnotations = function (rawModule, annotations) {\n  var self = this;\n  annotations = _.isObject(annotations) ? _.clone(annotations) : {};\n\n  //normalizes boostrap options\n  if (!annotations.type) {\n    if (_.isFunction(rawModule)) {\n      if (_.isEmpty(rawModule.prototype)) {\n        annotations.type = \"factory\";\n      } else {\n        annotations.type = \"constructor\";\n      }\n    } else {\n      annotations.type = \"object\";\n    }\n  }\n  var initialize = annotations.initialize;\n  //normalizes initialize\n  if (initialize) {\n    if (_.isString(initialize) || _.isFunction(initialize)) {\n      annotations.initialize = [[], initialize];\n    }\n  }\n\n  //resolve relative dependencies\n  annotations.args = _.map(annotations.args, this.resolveDependencyName, this);\n  annotations.properties = _.mapValues(annotations.properties, this.resolveDependencyName, this);\n  if (annotations.initialize) {\n    annotations.initialize[0] = _.map(annotations.initialize[0], this.resolveDependencyName, this);\n  }\n\n  // self.delayedDeps = {};\n  // function addDep(dep) {\n  //   if(self.isDelayedModuleDep(dep)) {\n  //     self.delayedDeps[dep] = true;\n  //   } else if(self.delayedDeps[dep]) {\n  //     delete self.delayedDeps[dep];\n  //   }\n  // }\n\n  // _.each(annotations.args, addDep);\n  // _.each(annotations.properties, addDep);\n  // if(annotations.initialize) {\n  //   _.each(annotations.initialize[0], addDep);\n  // }\n\n  return annotations;\n};\n\n/**\n *\n * @param data\n */\nModule.prototype.setData = function (data) {\n  _.extend(this, _.pick(data, 'rawModule', 'initializePromise', 'instancePromise', 'wirePromise', 'instance', 'initStatus', 'particle', 'parent'));\n  if (!this.particle) {\n    this.particle = {};\n  }\n  if (data.annotations || !this.annotations) {\n    this.annotations = this._normalizeAnnotations(this.rawModule, data.annotations);\n    this.options.plugins.forEach(function (plugin) {\n      _.isFunction(plugin.processAnnotations) && plugin.processAnnotations(this.annotations, this);\n    }, this);\n  }\n};\nModule.prototype.getInstance = function () {\n  return this.instance;\n};\nModule.prototype.getParent = function () {\n  return this.parent;\n};\nModule.prototype.setParent = function (parent) {\n  this.parent = parent;\n  //merge the provides\n  if (!this.annotations.overrideProvides) {\n    _.defaults(this.provides, parent.provides);\n  }\n};\n\n/**\n *\n * @returns {*}\n */\nModule.prototype.instantiate = function () {\n  var self = this;\n  if (self.instancePromise) {\n    return self.instancePromise;\n  }\n  if (self.annotations.isStateful && !self.isStateful) {\n    self.log('debug', \"Initializing dynamic module template \" + self.name);\n    //do not bootstrap dynamic modules\n    self.setData({\n      instance: null,\n      instancePromise: Promises.resolve(self),\n      wirePromise: Promises.resolve(self),\n      initializePromise: Promises.resolve(self),\n      initStatus: Constants.MODULE_INITIALIZED\n    });\n    return Promises.resolve(self);\n  }\n  self.log('trace', \"Instantiating module \" + self.name);\n  var ret = null;\n  var type = self.annotations.type;\n  switch (type) {\n    case \"object\":\n      self.log('trace', \"Assigning module \" + self.name);\n      //just assign it\n      ret = Promises.resolve(self.rawModule);\n      break;\n    case \"constructor\":\n      self.log('trace', \"Instantiating module \" + self.name + \" from the constructor\");\n      ret = self.newInject(self.rawModule, self.annotations.args);\n      break;\n    case \"factory\":\n      self.log('trace', \"Retrieving module \" + self.name + \" from the factory (\" + self.annotations.args + \")\");\n      ret = self.invokeInject(self.rawModule, self.annotations.args, null);\n      break;\n    default:\n      throw new Error(\"Unrecognized module type: \" + type);\n  }\n  return self.instancePromise = Promises.timeout(self.options.instantiateTimeout, ret.then(function (ret) {\n    self.log('trace', \"Module \" + self.name + \" is instantiated\");\n    self.setData({\n      instance: ret,\n      initStatus: Constants.MODULE_INSTANTIATED\n    });\n    return self;\n  })).catch(function (err) {\n    if (err.message.match(/timed out after/)) {\n      throw new Error(\"Instantiation of module \" + self.name + \" timed out (possible deadlock)\");\n    }\n    throw err;\n  });\n};\n\n/**\n * initialize and inject properties. Also initializes all dependencies\n * @returns {*}\n */\nModule.prototype.wire = function () {\n  var self = this;\n  if (self.wirePromise) {\n    return self.wirePromise;\n  }\n  return self.wirePromise = self.instantiate().then(function () {\n    self.log('trace', \"Wiring module \" + self.name);\n\n    //do we have properties to inject?\n    if (!_.isEmpty(self.annotations.properties)) {\n      self.log('trace', \"Injecting properties into module \" + self.name + \", props: \" + self.annotations.properties);\n      return self.injectProperties(self.instance, self.annotations.properties).then(function () {\n        self.log('trace', \"Module wired \" + self.name);\n        self.setData({\n          initStatus: Constants.MODULE_WIRED\n        });\n        return self;\n      });\n    } else {\n      self.setData({\n        initStatus: Constants.MODULE_WIRED\n      });\n      self.log('trace', \"Module wired \" + self.name);\n      return Promises.resolve(self);\n    }\n  });\n};\n\n/**\n * initialize and inject properties. Also initializes all dependencies\n * @returns {*}\n */\nModule.prototype.initialize = function () {\n  var self = this;\n  if (self.initializePromise) {\n    return self.initializePromise;\n  }\n  var initializePromise = self.wire().then(function () {\n    self.log('trace', \"Initializing module \" + self.name);\n\n    //any initialize?\n    var initialize = self.annotations.initialize;\n    if (!initialize) {\n      return undefined;\n    }\n    var initializeFoo = initialize[1];\n    if (_.isString(initializeFoo)) {\n      initializeFoo = self.instance[initializeFoo];\n    }\n    if (_.isFunction(initializeFoo)) {\n      self.log('trace', \"Invoking initialize method for module \" + self.name);\n      return self.invokeInject(initializeFoo, initialize[0], self.instance);\n    }\n    return undefined;\n  }).then(function () {\n    self.setData({\n      initStatus: Constants.MODULE_INITIALIZED\n    });\n    self.log('trace', \"Module initialized \" + self.name);\n    return self;\n  });\n  return self.initializePromise = Promises.timeout(self.options.initializeTimeout, initializePromise).catch(function (err) {\n    if (err.message.match(/timed out after/)) {\n      throw new Error(\"Initialization of module \" + self.name + \" timed out (possible deadlock)\");\n    }\n    throw err;\n  });\n};\nModule.prototype.initializeTree = function () {\n  var self = this;\n  if (self.initializeTreePromise) {\n    return self.initializeTreePromise;\n  }\n  return self.initializeTreePromise = self.initialize().then(function () {\n    var deps = {};\n    function addDep(dep) {\n      if (self.isModuleDep(dep) && deps[dep] === void 0 && dep !== self.name && module.initStatus < Constants.MODULE_TREE_INITIALIZED) {\n        deps[dep] = self.getModuleFromDep(dep).initializeTree();\n      }\n    }\n    if (self.parent) {\n      deps.__parent = self.parent.initializeTree();\n    }\n    _.each(self.annotations.args, addDep);\n    _.each(self.annotations.properties, addDep);\n    if (self.annotations.initialize) {\n      _.each(self.annotations.initialize[0], addDep);\n    }\n    return Promises.allKeys(deps).then(function (results) {\n      self.setData({\n        initStatus: Constants.MODULE_TREE_INITIALIZED\n      });\n      return self;\n    });\n  });\n};\nModule.prototype.getModuleFromDep = function (name) {\n  return this.container.getModuleFromDep(name, this);\n};\nModule.prototype.isModuleDep = function (name) {\n  return this.container.isModuleDep(name);\n};\nModule.prototype.isPlainModuleDep = function (name) {\n  return this.container.isPlainModuleDep(name);\n};\nModule.prototype.getModule = function (name) {\n  return this.container.getModule(name, this);\n};\nModule.prototype.load = function (deps, initOpts) {\n  return this.container.load(deps, this, initOpts);\n};\nModule.prototype.newInject = function (constr, deps) {\n  //do we have arguments to inject?\n  if (_.isEmpty(deps)) {\n    return Promises.resolve(new constr());\n  } else {\n    return this.load(deps).then(function (modDeps) {\n      return utils.applyConstruct(constr, modDeps);\n    });\n  }\n};\nModule.prototype.invokeInject = function (foo, deps, context) {\n  return this.load(deps).then(function (modDeps) {\n    return foo.apply(context, modDeps);\n  });\n};\nModule.prototype.injectProperties = function (instance, properties) {\n  return this.load(properties).then(function (modDeps) {\n    _.extend(instance, modDeps);\n  });\n};\nmodule.exports = Module;","map":{"version":3,"names":["_","require","Promises","Constants","path","utils","Module","name","container","data","options","log","startProfiling","initStatus","MODULE_NOT_INSTANTIATED","setData","prototype","resolveDependencyName","dep","isPlainModuleDep","join","sliceSize","process","platform","resolve","dirname","slice","replace","_normalizeAnnotations","rawModule","annotations","self","isObject","clone","type","isFunction","isEmpty","initialize","isString","args","map","properties","mapValues","extend","pick","particle","plugins","forEach","plugin","processAnnotations","getInstance","instance","getParent","parent","setParent","overrideProvides","defaults","provides","instantiate","instancePromise","isStateful","wirePromise","initializePromise","MODULE_INITIALIZED","ret","newInject","invokeInject","Error","timeout","instantiateTimeout","then","MODULE_INSTANTIATED","catch","err","message","match","wire","injectProperties","MODULE_WIRED","undefined","initializeFoo","initializeTimeout","initializeTree","initializeTreePromise","deps","addDep","isModuleDep","module","MODULE_TREE_INITIALIZED","getModuleFromDep","__parent","each","allKeys","results","getModule","load","initOpts","constr","modDeps","applyConstruct","foo","context","apply","exports"],"sources":["C:/Users/twotr/Desktop/College/vsCode/WorkHumanApplication/country-search/node_modules/scatter/lib/Module.js"],"sourcesContent":["var _ = require('lodash'),\n  Promises = require('./promises'),\n  Constants = require('./constants'),\n  path = require('path'),\n  utils = require('./utils');\n\n/**\n *\n * @param name\n * @param container\n * @param data\n * @param options\n * @constructor\n */\nfunction Module(name, container, data, options) {\n  this.name = name;\n  this.container = container;\n\n  this.options = options;\n  this.log = this.options.log;\n  this.startProfiling = this.options.startProfiling;\n  this.initStatus = Constants.MODULE_NOT_INSTANTIATED;\n  //this.delayedDeps = {};\n\n  this.setData(data);\n}\n\n\nModule.prototype.resolveDependencyName = function(dep) {\n  if(this.isPlainModuleDep(dep)) {\n    if(dep[0] !== \".\" && dep[0] !== \"/\") {\n      //always consider a module as absolute unless specifically stated\n      //otherwise\n      dep = path.join(\"/\", dep);\n    }\n    //Remove leading \"/\" or leading drive letter e.g \"C:\\\"\n    var sliceSize = process.platform === \"win32\" ? 3 : 1;\n    return path.resolve(\"/\", path.dirname(this.name), dep)\n      .slice(sliceSize).replace(/\\\\/g, '/');\n  }\n  return dep;\n};\n\n\nModule.prototype._normalizeAnnotations = function(rawModule, annotations) {\n  var self = this;\n  annotations = _.isObject(annotations) ? _.clone(annotations) : {};\n  \n  //normalizes boostrap options\n  if(!annotations.type) {\n    if(_.isFunction(rawModule)) {\n      if(_.isEmpty(rawModule.prototype)) {\n        annotations.type = \"factory\";\n      } else {\n        annotations.type = \"constructor\";\n      }\n    } else {\n      annotations.type = \"object\";\n    }\n  }\n\n  var initialize = annotations.initialize;\n  //normalizes initialize\n  if(initialize) {\n    if(_.isString(initialize) || _.isFunction(initialize)) {\n      annotations.initialize = [[], initialize];\n    }\n  }\n  \n  //resolve relative dependencies\n  annotations.args = _.map(annotations.args, this.resolveDependencyName, this);\n  annotations.properties = _.mapValues(annotations.properties, this.resolveDependencyName, this);\n  if(annotations.initialize) {\n    annotations.initialize[0] = _.map(annotations.initialize[0], this.resolveDependencyName, this);\n  }\n  \n  // self.delayedDeps = {};\n  // function addDep(dep) {\n  //   if(self.isDelayedModuleDep(dep)) {\n  //     self.delayedDeps[dep] = true;\n  //   } else if(self.delayedDeps[dep]) {\n  //     delete self.delayedDeps[dep];\n  //   }\n  // }\n  \n  // _.each(annotations.args, addDep);\n  // _.each(annotations.properties, addDep);\n  // if(annotations.initialize) {\n  //   _.each(annotations.initialize[0], addDep);\n  // }\n\n  return annotations;\n};\n\n\n/**\n *\n * @param data\n */\nModule.prototype.setData = function(data) {\n  _.extend(this, _.pick(data,\n    'rawModule', 'initializePromise', 'instancePromise', 'wirePromise',\n    'instance', 'initStatus', 'particle', 'parent'\n  ));\n  if(!this.particle) {\n    this.particle = {};\n  }\n  \n  if(data.annotations || !this.annotations) {\n    this.annotations = this._normalizeAnnotations(this.rawModule, data.annotations);\n    this.options.plugins.forEach(function(plugin) {\n      _.isFunction(plugin.processAnnotations) && plugin.processAnnotations(this.annotations, this);\n    }, this);\n  }\n};\n\nModule.prototype.getInstance = function() {\n  return this.instance;\n};\n\n\nModule.prototype.getParent = function() {\n  return this.parent;\n};\n\nModule.prototype.setParent = function(parent) {\n  this.parent = parent;\n  //merge the provides\n  if(!this.annotations.overrideProvides) {\n    _.defaults(this.provides, parent.provides);\n  }\n};\n\n/**\n *\n * @returns {*}\n */\nModule.prototype.instantiate = function() {\n  var self = this;\n  if(self.instancePromise) {\n    return self.instancePromise;\n  }\n  \n  if(self.annotations.isStateful && !self.isStateful) {\n    self.log('debug', \"Initializing dynamic module template \" + self.name);\n    //do not bootstrap dynamic modules\n    self.setData({\n      instance: null,\n      instancePromise: Promises.resolve(self),\n      wirePromise: Promises.resolve(self),\n      initializePromise: Promises.resolve(self),\n      initStatus: Constants.MODULE_INITIALIZED\n    });\n    return Promises.resolve(self);\n  }\n  self.log('trace', \"Instantiating module \" + self.name);\n\n  var ret = null;\n  var type = self.annotations.type;\n  switch(type) {\n    case \"object\":\n      self.log('trace', \"Assigning module \" + self.name);\n      //just assign it\n      ret = Promises.resolve(self.rawModule);\n      break;\n    case \"constructor\":\n      self.log('trace', \"Instantiating module \" + self.name +  \" from the constructor\");\n      ret = self.newInject(self.rawModule, self.annotations.args);\n      break;\n    case \"factory\":\n      self.log('trace', \"Retrieving module \" + self.name + \" from the factory (\" + self.annotations.args + \")\");\n      ret = self.invokeInject(self.rawModule, self.annotations.args, null);\n      break;\n    default:\n      throw new Error(\"Unrecognized module type: \" + type);\n  }\n\n  return self.instancePromise = Promises.timeout(self.options.instantiateTimeout, ret.then(function(ret) {\n    self.log('trace', \"Module \" + self.name + \" is instantiated\");\n    self.setData({instance: ret, initStatus: Constants.MODULE_INSTANTIATED});\n    return self;\n  })).catch(function(err) {\n    if(err.message.match(/timed out after/)) {\n      throw new Error(\"Instantiation of module \" + self.name + \" timed out (possible deadlock)\");\n    }\n    throw err;\n  });\n};\n\n/**\n * initialize and inject properties. Also initializes all dependencies\n * @returns {*}\n */\nModule.prototype.wire = function() {\n  var self = this;\n  if(self.wirePromise) {\n    return self.wirePromise;\n  }\n  \n  return self.wirePromise = self.instantiate().then(function() {\n    self.log('trace', \"Wiring module \" + self.name);\n    \n    //do we have properties to inject?\n    if(!_.isEmpty(self.annotations.properties)) {\n      self.log('trace', \"Injecting properties into module \" + self.name + \", props: \" + self.annotations.properties);\n      return self.injectProperties(self.instance, self.annotations.properties).then(function() {\n        self.log('trace', \"Module wired \" + self.name);\n        self.setData({initStatus: Constants.MODULE_WIRED});\n        return self;\n      });\n    } else {\n      self.setData({initStatus: Constants.MODULE_WIRED});\n      self.log('trace', \"Module wired \" + self.name);\n      return Promises.resolve(self);\n    }\n  });\n};\n\n\n/**\n * initialize and inject properties. Also initializes all dependencies\n * @returns {*}\n */\nModule.prototype.initialize = function() {\n  var self = this;\n  if(self.initializePromise) {\n    return self.initializePromise;\n  }\n  \n  var initializePromise = self.wire().then(function() {\n    self.log('trace', \"Initializing module \" + self.name);\n    \n    //any initialize?\n    var initialize = self.annotations.initialize;\n    if(!initialize) {\n      return undefined;\n    }\n\n    var initializeFoo = initialize[1];\n    if(_.isString(initializeFoo)) {\n      initializeFoo = self.instance[initializeFoo];\n    }\n    if(_.isFunction(initializeFoo)) {\n      self.log('trace', \"Invoking initialize method for module \" + self.name);\n      return self.invokeInject(initializeFoo, initialize[0], self.instance);\n    }\n    return undefined;\n  }).then(function() {\n    self.setData({initStatus: Constants.MODULE_INITIALIZED});\n    self.log('trace', \"Module initialized \" + self.name);\n    return self;\n  });\n  \n  return self.initializePromise = Promises.timeout(self.options.initializeTimeout, initializePromise).catch(function(err) {\n    if(err.message.match(/timed out after/)) {\n      throw new Error(\"Initialization of module \" + self.name + \" timed out (possible deadlock)\");\n    }\n    throw err;\n  });\n};\n\n\nModule.prototype.initializeTree = function() {\n  var self = this;\n  if(self.initializeTreePromise) {\n    return self.initializeTreePromise;\n  }\n  \n  return self.initializeTreePromise = self.initialize().then(function() {\n    var deps = {};\n    function addDep(dep) {\n      if(self.isModuleDep(dep) && deps[dep] === void 0 && dep !== self.name && module.initStatus < Constants.MODULE_TREE_INITIALIZED) {\n        deps[dep] = self.getModuleFromDep(dep).initializeTree();\n      }\n    }\n  \n    if(self.parent) {\n      deps.__parent = self.parent.initializeTree();\n    }\n    \n    _.each(self.annotations.args, addDep);\n    _.each(self.annotations.properties, addDep);\n    if(self.annotations.initialize) {\n      _.each(self.annotations.initialize[0], addDep);\n    }\n    \n    return Promises.allKeys(deps).then(function(results) {\n      self.setData({initStatus: Constants.MODULE_TREE_INITIALIZED});\n      return self;\n    });\n  });\n};\n\n\nModule.prototype.getModuleFromDep = function(name) {\n  return this.container.getModuleFromDep(name, this);\n};\n\nModule.prototype.isModuleDep = function(name) {\n  return this.container.isModuleDep(name);\n};\n\nModule.prototype.isPlainModuleDep = function(name) {\n  return this.container.isPlainModuleDep(name);\n};\n\nModule.prototype.getModule = function(name) {\n  return this.container.getModule(name, this);\n};\n\nModule.prototype.load = function(deps, initOpts) {\n  return this.container.load(deps, this, initOpts);\n};\n\n\nModule.prototype.newInject = function(constr, deps) {\n  //do we have arguments to inject?\n  if(_.isEmpty(deps)) {\n    return Promises.resolve(new constr());\n  } else {\n    return this.load(deps).then(function(modDeps) {\n      return utils.applyConstruct(constr, modDeps);\n    });\n  }\n};\n\n\nModule.prototype.invokeInject = function(foo, deps, context) {\n  return this.load(deps).then(function(modDeps) {\n    return foo.apply(context, modDeps);\n  });\n};\n\n\nModule.prototype.injectProperties = function(instance, properties) {\n  return this.load(properties).then(function(modDeps) {\n    _.extend(instance, modDeps);\n  });\n};\n\n\nmodule.exports = Module;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}